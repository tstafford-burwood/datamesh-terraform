steps:


# Service Control Perimeter Terraform Apply Prod

- id: "scp init"
  name: hashicorp/terraform:${_TAG}
  dir: 'environment/${_PREFIX}/vpc-service-controls/service-perimeter'
  args: [
  'init',
  '-backend-config=bucket=${_BUCKET}',
  '-backend-config=prefix=${_PREFIX}/service-perimeter'
  ]

- id: "scp plan"
  name: hashicorp/terraform:${_TAG}
  dir: 'environment/foundation/vpc-service-controls/service-perimeter'
  args: [
  'plan',
  '-var-file=env/${_TFVARS_FILE}.tfvars'
  ]

- id: "scp apply"
  name: hashicorp/terraform:${_TAG}
  dir: 'environment/foundation/vpc-service-controls/service-perimeter'
  args: [
  'apply',
  '-var-file=env/${_TFVARS_FILE}.tfvars',
  '-auto-approve'
  ]

timeout: 3600s